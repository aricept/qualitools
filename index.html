<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<title>CBS QUALITools</title>
	<!--<script src="js/jquery-3.2.1.min.js"></script>
	<script src="js/popper.min.js"></script>
	<script src="js/bootstrap.min.js"></script> -->
	<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js" integrity="sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh" crossorigin="anonymous"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js" integrity="sha384-alpBpkh1PFOepccYVYDB4do5UnbKysX5WZXm3XxPqe5iKTfUKjNkCk9SaVuEZflJ" crossorigin="anonymous"></script>
	<script src="js/knockout-3.4.2.js"></script>
	<script src="js/links.js"></script>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb" crossorigin="anonymous">
	<link rel="stylesheet" href="css/main.css" type="text/css" />
	<script>
		var Section = function(section) {
			var self = this;
			self.name = ko.observable(section.name);
			self.links = ko.observableArray(section.links);
			self.shown = ko.observable(false);
			self.slideOut = ko.observable(false);
			self.closing = ko.observable(false);
			self.hideAll = section.hideAll;
			self.delayClose = section.delayClose;
			self.showLinks = function() {
				self.shown(true);
				var slider = setTimeout(self.slideOut, 50, true);
			};
			self.childWidth = function() {
				return $( ".shown" ).width();
			};
			/*self.hideLinks = function() {
				self.shown(false);
				var slider = setTimeout(self.slideOut, 50, false);
			};*/
		};

		var SectionsModel = function(sectionList) {
			var self = this;
			self.list = ko.observableArray([]);
			self.hideAll = function(which) {
				self.list().forEach(function(section){
					section.shown(false);
					section.slideOut(false);
				});
				which.shown(true);
				which.slideOut(true);
			};
			sectionList.forEach(function(section) {
				self.list.push(new Section(section));
			});
		};
	</script>
</head>
<body>
	<div class="header">
		<h2>CBS QUALI<em>Tools</em></h2>
	</div>
	<div class="section-menu">
		<div class="section-list" data-bind="foreach: list">
			<div class="section-item" data-bind="event: {mouseover: $parent.hideAll}, css: {shownheader: slideOut}">
				<span data-bind="text: name"></span>
			</div>
			<ul class="links-list" data-bind="foreach: links, css: {shown: slideOut}, style: {height: slideOut() ? (links().length)*30+'px' : 0+'px'}">
				<li><a data-bind="text: title, attr: { href: url, title: title }" target="_new"></a></li>
			</ul>
		</div>
	</div>
</body>
<script>
	var mark = ko.applyBindings(new SectionsModel(sections));
</script>

</html>